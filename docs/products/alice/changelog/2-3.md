---
title : AliceScript 2.3の新機能
summary : この記事では、AliceScript2.3の変更点と新機能について説明します
order : 7
---
### 新機能
- 関数の呼び出し履歴を参照することができる`StackTrace`を実装
- [#23](https://github.com/WSOFT-Project/Losetta/issues/23) 配列の型指定を導入
- クラス名を使用しても`type`オブジェクトが取得できるように
- `new`関数を実装
- `env_expand_environmentVariables`の引数の文字列がnullでも例外が発生しないように
- #40 `throw`式が引数として`Exception`オブジェクトも受け入れるように
- デバッグ出力のインデントに使用される文字をを空白文字4つに変更
- デバッグ出力の表示色を白色から水色に変更
- REPLで呼び出し履歴（スタックトレース）が表示されるように
- 数値型リテラルの先頭と末尾以外の場所で区切り文字としてアンダースコア（_）を使用できるように
- `u8"文字列"`とすることで文字列のUTF-8表現を記述できるUTF-8リテラルを実装
- `$"2+3 = {2+3}"`とすることで`2+3 = 5`と出力されるような文字列補間を実装
- 関数およびメソッドの引数で参照渡しができるように
- `array[^1]`とすることで配列の特定番目の要素を逆から指定できるように
- `env_lang_name`関数と`env_lang_version`関数を追加
- ARM版macOS(M1Mac)をネイティブサポート

### 不具合の修正
- [#9](https://github.com/WSOFT-Project/Losetta/issues/9) switch式で選択されるより後の条件も実行されてしまう不具合を修正
- [#11](https://github.com/WSOFT-Project/Losetta/issues/11) 引数の型指定が効かない不具合を修正
- [#21](https://github.com/WSOFT-Project/Losetta/issues/21) while構文が使用できない不具合を修正
- [#22](https://github.com/WSOFT-Project/Losetta/issues/22) `foreach`構文の記述に一貫性のない問題を修正
- [#24](https://github.com/WSOFT-Project/Losetta/issues/24) デリゲートのスコープの妥当性の問題を修正
- [#25](https://github.com/WSOFT-Project/Losetta/issues/25) オブジェクトのプロパティに対して複合代入演算が使用できない不具合を修正
- [#28](https://github.com/WSOFT-Project/Losetta/issues/28) `Alice.Random.random_int`がクラッシュする不具合を修正
- [#29](https://github.com/WSOFT-Project/Losetta/issues/29) `Alice.Random.random_int`に最大値だけを指定して実行すると、nullが返ってくる不具合を修正
- [#31](https://github.com/WSOFT-Project/Losetta/issues/31) `do-while`完了後に0x020エラーが発生する不具合を修正
- [#32](https://github.com/WSOFT-Project/Losetta/issues/32) `gc_gettotalmemory`が値を返さない不具合を修正
- [#34](https://github.com/WSOFT-Project/Losetta/issues/34) `env_get_environmentvariable`がobjectを返す不具合を修正
- [#37](https://github.com/WSOFT-Project/Losetta/issues/37) for文で一度も本文が処理されない場合に0x004例外が発生する不具合を修正
- [#38](https://github.com/WSOFT-Project/Losetta/issues/38) `0x029`例外が発生してfor文が動作しない不具合を修正
- [#41](https://github.com/WSOFT-Project/Losetta/issues/41) new式でインスタンス化したオブジェクトのプロパティが参照できない不具合を修正
- [#43](https://github.com/WSOFT-Project/Losetta/issues/43) 関数内で発生した例外に対して関数外のtryブロックが効かない不具合を修正
- ファイルのテキスト読み込みで例外が発生する不具合を修正
- CLR配列からAlice配列への変換ができない不具合を修正

### 破壊的変更・廃止
[互換性に影響を与える変更点](./compatibility.md)も参照してください。

- [#39](https://github.com/WSOFT-Project/Losetta/issues/39) `Alice.Drawing`名前空間の廃止・削除
- [#44](https://github.com/WSOFT-Project/Losetta/issues/44) 使用実態のないWSOFTScript互換関数を`Alice.Legacy`名前空間に移動
- 例外が発生したら原則終了するように変更
- 配列同士の`+=`操作をマージから追加操作に変更